---
name: codex-prompt-engineering
description: Optimize Codex/GPT prompts for gpt-5.1, gpt-5.2, and gpt-5.2-codex using reasoning effort calibration, agentic autonomy patterns, canonical tool architectures (apply_patch, shell_command, update_plan), preamble design, output compactness, parallel tool calling, evaluation flywheel methodology, context compaction, and security essentials. Apply when designing system prompts, reviewing Codex skill generation, tuning reasoning effort levels (none/low/medium/high/xhigh), implementing tool orchestration, building evaluation pipelines, optimizing long-running agents, or deploying production coding assistants requiring GPT-specific optimization.
---

# Codex Prompt Engineering

> **Knowledge snapshot from:** 2026-02-20
>
> **Generated by:** cogworks

## Overview

This skill provides expert guidance for optimizing Codex/GPT prompts across gpt-5.1, gpt-5.2, and gpt-5.2-codex models. It synthesizes platform-specific best practices covering reasoning effort calibration, agentic autonomy (the "discerning engineer" pattern), canonical tool implementations, output design, evaluation methodology, and security essentials.

## When to Use This Skill

Apply this skill when:

- **Designing system prompts** for Codex skills or coding agents
- **Reviewing generated skills** in Codex skill generation pipelines
- **Tuning reasoning parameters** (effort levels: none/low/medium/high/xhigh)
- **Implementing tool architectures** (apply_patch, shell_command, update_plan)
- **Building evaluation pipelines** using the evaluation flywheel methodology
- **Optimizing agent output** for compactness and user experience
- **Configuring autonomy levels** for interactive vs autonomous tasks
- **Enabling long-running agents** with context compaction
- **Deploying production systems** requiring security controls
- **Migrating from other platforms** (e.g., Claude to Codex)

## Key Topics Covered

### Reasoning & Autonomy
- **Reasoning Effort Calibration**: none/low/medium/high/xhigh selection by task type
- **Agentic Autonomy**: "Discerning engineer" pattern (gather→plan→implement→test→refine)
- **Preamble Design**: User update frequency and content guidelines

### Tool Architecture
- **apply_patch**: Context-free grammar approach for code changes
- **shell_command**: String vs array commands, working directory, timeouts
- **update_plan**: Task management with pending/in_progress/completed statuses
- **Parallel Tool Calling**: Batching reads/searches with multi_tool_use.parallel

### Quality & Evaluation
- **Evaluation Flywheel**: Analyze (open/axial coding) → Measure (automated graders) → Improve (targeted changes)
- **Output Compactness**: Verbosity rules by change size
- **LLM Judge Alignment**: Train/validation/test splits for grader calibration

### Advanced Capabilities
- **Context Compaction**: /compact endpoint for multi-hour agent trajectories
- **Security Essentials**: Input validation, prompt injection prevention
- **Universal PE Fundamentals**: Few-shot, CoT, in-context learning (GPT-contextualized)

## Supporting Documentation

- **reference.md**: Complete knowledge base with TL;DR, core concepts, concept map, deep dives, quick reference, and sources
- **patterns.md**: Transferable patterns applicable beyond prompt engineering
- **examples.md**: Before/after comparisons showing naive vs expert approaches

## Model Routing Contract

- **primary-capability-class**: reasoning
- **fallback-capability-class**: workhorse
- **task-to-capability mapping**:
  - source ingestion/extraction: workhorse
  - synthesis/contradiction resolution: reasoning
  - final skill drafting: workhorse
- **quality gates tied to capability**:
  - reasoning: resolve contradictions and justify chosen interpretation
  - workhorse: produce complete structure with citations and no stubs
- **runtime model resolution**:
  - map capability classes to provider/runtime defaults automatically
  - never ask the user to choose a model

## Invocation

This skill can be invoked by name in Codex environments or referenced explicitly when working on prompt optimization, skill generation, or agentic workflow design.

```
Use the codex-prompt-engineering skill to review this system prompt
```

Or integrated into Codex cogworks agent skill dependencies for automatic availability during skill generation.
